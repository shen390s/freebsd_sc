#!/bin/sh

APP=$(basename $0)
_appdir=$(dirname $0)
TOP=$(realpath $(cd $_appdir/.. && pwd))

action="$1"
shift

export APP TOP

. $TOP/share/sc/lib/funcs
. $TOP/share/sc/sv/svcs

sc_help() {
    local _c

    printf "usage:   %s command [command options] \n" $APP
    for _c in ${sc_commands}; do
	if [ "x$(fn_defined sc_${_c}_help)" = "xyes" ]; then
	    printf "\t - %s\n" "$(eval sc_${_c}_help)"
	else
	    printf "\t - %s\n" $_c
	fi
    done
}

load_commands

load_conf "$TOP/etc/sc.conf.default"

if [ "x$(fn_defined sc_${action})" = "xyes" ]; then
    eval "sc_${action} $@"
else
    if [ ! -z "$action" ]; then
	printf "unknown command: %s\n" $action
	printf "\n"
    fi
    
    sc_help
fi

# Local Variables:
# mode: sh
# End:
