gitea_port=$(get_port http gitea gitea)
giteassh_port=$(get_port tcp giteassh gitea)
valueOf_gitea_port() {
    echo ${gitea_port}
}

valueOf_gitea_ssh_port() {
    echo ${giteassh_port}
}

valueOf_gitea_services() {
    cat <<EOF
giteassh:tcp:${giteassh_port}:10s:20s
gitea:http:${gitea_port}:10s:20s
EOF
}

role_gitea_install() {
    svc_install gitea
    svc_config sshd "$(get_config gitea.ssh.port)"
    svc_enable sshd
    svc_start sshd
}

role_gitea_config() {
    svc_config gitea
    svc_config sshd "$(get_config gitea.ssh.port)"
}

role_gitea_start() {
    role_gitea_config
    svc_start sshd
    su git -c "GITEA_CUSTOM=$conf_mountpoint/gitea GITEA_WORK_DIR=/usr/local/share/gitea gitea web"
}
# Local Variables:
# mode: sh
# End:
