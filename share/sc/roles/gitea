valueOf_gitea_port() {
    echo $(get_port "http")
}

valueOf_gitea_ssh_port() {
    echo $(get_port "giteassh")
}

valueOf_gitea_services() {
    cat <<EOF
giteassh:tcp:$(get_config "gitea.ssh.port"):10s:20s
gitea:http:$(get_config "gitea.port"):10s:20s
EOF
}

role_gitea_install() {
    svc_install gitea
    svc_config sshd "$(get_config gitea.ssh.port)"
    svc_enable sshd
    svc_start sshd
}

role_gitea_config() {
    svc_config gitea
}

role_gitea_start() {
    svc_start sshd
    run_command su git -c "GITEA_CUSTOM=/mnt/sc/data/gitea GITEA_WORK_DIR=/usr/local/share/gitea gitea web"
    while : ; do
	  sleep 100
    done
}
# Local Variables:
# mode: sh
# End:
